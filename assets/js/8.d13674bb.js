(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{333:function(e,t,o){e.exports=o.p+"assets/img/tagging_01.655ce4b8.png"},334:function(e,t,o){e.exports=o.p+"assets/img/tagging_02.255cc296.png"},335:function(e,t,o){e.exports=o.p+"assets/img/tagging_03.bdc33987.png"},336:function(e,t,o){e.exports=o.p+"assets/img/tagging_04.3a0aa0f4.png"},337:function(e,t,o){e.exports=o.p+"assets/img/tagging_05.ecd8fc76.png"},338:function(e,t,o){e.exports=o.p+"assets/img/tagging_06.63f4012a.png"},454:function(e,t,o){"use strict";o.r(t);var a=o(43),s=Object(a.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h1",{attrs:{id:"aws-tagging-guidelines-policies"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#aws-tagging-guidelines-policies"}},[e._v("#")]),e._v(" AWS Tagging Guidelines + Policies")]),e._v(" "),a("blockquote",[a("p",[a("strong",[e._v("Note:")]),e._v(" These guidelines are specific to the Mojaloop Community's AWS Environment for testing and validating Mojaloop installations, and are primarily for internal purposes. They may, however, be a useful reference to others wishing to implement similar tagging strategies in their own organizations.")])]),e._v(" "),a("p",[e._v("To better manage and understand our AWS usage and spending, we are implementing the following tagging guidelines.")]),e._v(" "),a("h2",{attrs:{id:"contents"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#contents"}},[e._v("#")]),e._v(" Contents")]),e._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"#proposed-tags-and-their-meanings"}},[e._v("Proposed tags and their meanings")]),e._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"#mojaloopcost_center"}},[e._v("mojaloop/cost_center")])]),e._v(" "),a("li",[a("a",{attrs:{href:"#mojaloopowner"}},[e._v("mojaloop/owner")])])])]),e._v(" "),a("li",[a("a",{attrs:{href:"#manual-tagging"}},[e._v("Manual Tagging")])]),e._v(" "),a("li",[a("a",{attrs:{href:"#automated-tagging"}},[e._v("Automated Tagging")])]),e._v(" "),a("li",[a("a",{attrs:{href:"#aws-tagging-policies"}},[e._v("AWS Tagging Policies")]),e._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"#viewing-tag-reports--compliance"}},[e._v("Viewing Tag Reports + Compliance")])]),e._v(" "),a("li",[a("a",{attrs:{href:"#editing-tag-policies"}},[e._v("Editing Tag Policies")])]),e._v(" "),a("li",[a("a",{attrs:{href:"#attachingdetaching-tag-policies"}},[e._v("Attaching/Detaching Tag Policies")])])])])]),e._v(" "),a("h2",{attrs:{id:"proposed-tags-and-their-meanings"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#proposed-tags-and-their-meanings"}},[e._v("#")]),e._v(" Proposed tags and their meanings")]),e._v(" "),a("p",[e._v("We propose the following 2 tag "),a("em",[e._v("keys")]),e._v(":")]),e._v(" "),a("ul",[a("li",[a("code",[e._v("mojaloop/cost_center")])]),e._v(" "),a("li",[a("code",[e._v("mojaloop/owner")])])]),e._v(" "),a("h3",{attrs:{id:"mojaloop-cost-center"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#mojaloop-cost-center"}},[e._v("#")]),e._v(" "),a("code",[e._v("mojaloop/cost_center")])]),e._v(" "),a("p",[a("code",[e._v("mojaloop/cost_center")]),e._v(" is a breakdown of different resources in AWS by the workstream or project that is incurring the associated costs.")]),e._v(" "),a("p",[e._v("It loosely follows the format of "),a("code",[e._v("<account>-<purpose>[-subpurpose]")]),e._v(", where account is something like "),a("code",[e._v("oss")]),e._v(", "),a("code",[e._v("tips")]),e._v(", or "),a("code",[e._v("woccu")]),e._v(".")]),e._v(" "),a("blockquote",[a("p",[e._v("Note: It's likely that most of the resources will be under the "),a("code",[e._v("oss")]),e._v(' "account", but I managed to find some older resources that fall under the '),a("code",[e._v("tips")]),e._v(" and "),a("code",[e._v("woccu")]),e._v(" categories. We also want to plan for future types of resources that might be launched in the future.")])]),e._v(" "),a("p",[e._v("Some potential values for "),a("code",[e._v("mojaloop/cost_center")]),e._v(" are:")]),e._v(" "),a("ul",[a("li",[a("code",[e._v("oss-qa")]),e._v(": Open source QA work, such as the existing dev1 and dev2 environments")]),e._v(" "),a("li",[a("code",[e._v("oss-perf")]),e._v(": Open source performance work, such as the ongoing performance workstream")]),e._v(" "),a("li",[a("code",[e._v("oss-perf-poc")]),e._v(": Performance/Architecture POC")])]),e._v(" "),a("p",[e._v("We also reserve some special values:")]),e._v(" "),a("ul",[a("li",[a("code",[e._v("unknown")]),e._v(": This resource was evaluated (perhaps manually, or perhaps by an automated tool), and no appropriate "),a("code",[e._v("cost_center")]),e._v(" could be determined.\n"),a("ul",[a("li",[e._v("This will allow us to easily filter for the "),a("code",[e._v("mojaloop/cost_center:unknown")]),e._v(" tags and produce a report")])])]),e._v(" "),a("li",[a("code",[e._v("n/a")]),e._v(": This resource incurrs no cost, so we're not really worried about assigning a "),a("code",[e._v("cost_center")]),e._v(" to it\n"),a("ul",[a("li",[e._v("This can be useful for mass tagging resources that are hard to figure out where the belong, such as EC2 Security Groups")])])])]),e._v(" "),a("h3",{attrs:{id:"mojaloop-owner"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#mojaloop-owner"}},[e._v("#")]),e._v(" "),a("code",[e._v("mojaloop/owner")])]),e._v(" "),a("p",[a("code",[e._v("mojaloop/owner")]),e._v(" is a person who is responsible for the managing and shutdown of a given resource.")]),e._v(" "),a("p",[e._v("The goal of this tag is to prevent long running resources that everybody else thinks "),a("em",[e._v("someone else")]),e._v(" knows about, but we no longer need. By applying this tag, we will be able to have a list of "),a("em",[e._v("who to go to")]),e._v(" in order to ask questions about the resource.")]),e._v(" "),a("p",[e._v("The value can simply be a person's name, all lowercase:")]),e._v(" "),a("ul",[a("li",[a("code",[e._v("lewis")])]),e._v(" "),a("li",[a("code",[e._v("miguel")])]),e._v(" "),a("li",[e._v("etc.")])]),e._v(" "),a("p",[e._v("Once again, we will reserve the following values:")]),e._v(" "),a("ul",[a("li",[a("code",[e._v("unknown")]),e._v(": This resource was evaluated (perhaps manually, or perhaps by an automated tool), and no appropriate "),a("code",[e._v("cost_center")]),e._v(" could be determined.\n"),a("ul",[a("li",[e._v("This will allow us to easily filter for the "),a("code",[e._v("mojaloop/owner:unknown")]),e._v(" tags and see what resources are 'orphaned'")])])])]),e._v(" "),a("h2",{attrs:{id:"manual-tagging"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#manual-tagging"}},[e._v("#")]),e._v(" Manual Tagging")]),e._v(" "),a("p",[e._v('We can use the "Tag Editor" in the AWS console to search for untagged resources.')]),e._v(" "),a("ol",[a("li",[e._v("Log into the AWS Console")]),e._v(" "),a("li",[e._v('Under Resource Groups, select "Tag Editor"\n'),a("img",{attrs:{src:o(333),alt:""}})]),e._v(" "),a("li",[e._v('From the tag editor, select a Region (I typically use "All regions"), and Resource Type (I also typically use "All resource types")')]),e._v(" "),a("li",[e._v('Now select "Search Resources", and wait for the resources to appear')])]),e._v(" "),a("p",[e._v("You can also search by tags, or the absense of tags to see what resources have not been tagged yet.\n"),a("img",{attrs:{src:o(334),alt:""}})]),e._v(" "),a("ol",{attrs:{start:"5"}},[a("li",[e._v("Once you have a list of the resources, you can select and edit tags for many resources at once!")]),e._v(" "),a("li",[e._v("You can also export a "),a("code",[e._v(".csv")]),e._v(" file of resources found in your search")])]),e._v(" "),a("h2",{attrs:{id:"automated-tagging"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#automated-tagging"}},[e._v("#")]),e._v(" Automated Tagging")]),e._v(" "),a("p",[e._v("We currently automate tagging on the following")]),e._v(" "),a("p",[e._v("As we have a firmer grasp of our tagging guidelines, we need to introduce them into our tooling so that all of the grunt work of manual tagging.")]),e._v(" "),a("p",[e._v("At the moment, this will look like introducing tags into:")]),e._v(" "),a("ol",[a("li",[e._v("Rancher - which currently manages our Kubernetes clusters for both QA and Performance purposes")]),e._v(" "),a("li",[e._v("IAC - The upcoming IAC code that will eventually be running our dev environments")])]),e._v(" "),a("h2",{attrs:{id:"aws-tagging-policies"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#aws-tagging-policies"}},[e._v("#")]),e._v(" AWS Tagging Policies")]),e._v(" "),a("p",[e._v("As of August 3, 2020, we have started introducing "),a("a",{attrs:{href:"https://docs.aws.amazon.com/organizations/latest/userguide/orgs_manage_policies_tag-policies.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("AWS Tagging Policies"),a("OutboundLink")],1),e._v(" to better enforce tags and monitor our resources (especially with respect to costs).")]),e._v(" "),a("h3",{attrs:{id:"viewing-tag-reports-compliance"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#viewing-tag-reports-compliance"}},[e._v("#")]),e._v(" Viewing Tag Reports + Compliance")]),e._v(" "),a("ol",[a("li",[e._v("Log in to the AWS Console")]),e._v(" "),a("li",[e._v('"Resource Groups" > "Tag Editor"')]),e._v(" "),a("li",[e._v('On the left sidebar, select "Tag Policies"')])]),e._v(" "),a("p",[e._v('From here you can see the tag policies "compliance report"')]),e._v(" "),a("p",[a("img",{attrs:{src:o(335),alt:""}})]),e._v(" "),a("h3",{attrs:{id:"editing-tag-policies"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#editing-tag-policies"}},[e._v("#")]),e._v(" Editing Tag Policies")]),e._v(" "),a("blockquote",[a("p",[e._v("Note: This may require special admin priviledges to access these pages")])]),e._v(" "),a("ol",[a("li",[e._v("Log in to the AWS Console")]),e._v(" "),a("li",[e._v('Select "username@mojaloop" in the top right > "My Organization"')]),e._v(" "),a("li",[e._v('Select "Policies" > "Tag Policies"')])]),e._v(" "),a("p",[a("img",{attrs:{src:o(336),alt:""}})]),e._v(" "),a("ol",{attrs:{start:"4"}},[a("li",[e._v("From here, you can view the current tag policies")])]),e._v(" "),a("p",[a("img",{attrs:{src:o(337),alt:""}})]),e._v(" "),a("ol",{attrs:{start:"5"}},[a("li",[e._v('In the sidebar, you can click "View details" > "Edit policy" to edit the policy')])]),e._v(" "),a("h3",{attrs:{id:"attaching-detaching-tag-policies"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#attaching-detaching-tag-policies"}},[e._v("#")]),e._v(" Attaching/Detaching Tag Policies")]),e._v(" "),a("ol",[a("li",[e._v('Go to the "My Organization" page')]),e._v(" "),a("li",[e._v('Select the relevant account > "Tag policies" in the sidebar')]),e._v(" "),a("li",[e._v("From here you can Attach + Detach tag policies")])]),e._v(" "),a("p",[a("img",{attrs:{src:o(338),alt:""}})])])}),[],!1,null,null,null);t.default=s.exports}}]);