(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{324:function(e,t,a){e.exports=a.p+"assets/img/glory-of-rest.a9d3641d.png"},443:function(e,t,a){"use strict";a.r(t);var r=a(43),n=Object(r.a)({},(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[r("h1",{attrs:{id:"pragmatic-rest"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#pragmatic-rest"}},[e._v("#")]),e._v(" Pragmatic REST")]),e._v(" "),r("h2",{attrs:{id:"pragmatic-rest-for-the-mojaloop-project"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#pragmatic-rest-for-the-mojaloop-project"}},[e._v("#")]),e._v(" Pragmatic REST For the Mojaloop Project")]),e._v(" "),r("p",[e._v("With the emergence of API strategy as a scaling tool for Internet service businesses, the focus on interconnect technology has shifted. Building on the principles that enabled the Web to form and scale, REST (Representational State Transfer) has become a design preference for Internet service APIs. But while the REST principles, proposed in Roy Fielding's dissertation that defined them, have academic value as a basis for research, a pure REST design is not at present practical for most applications. We are advocating a kind of Pragmatic REST-a design pattern that adopts the beneficial components of RESTful design without requiring strict adherence to academic purity.")]),e._v(" "),r("h3",{attrs:{id:"the-richardson-maturity-model"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#the-richardson-maturity-model"}},[e._v("#")]),e._v(" The Richardson Maturity Model")]),e._v(" "),r("p",[e._v("Martin Fowler has referenced1 a structured model of RESTful adoption developed by Leonard Richardson and "),r("a",{attrs:{href:"http://www.crummy.com/writing/speaking/2008-QCon/act3.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("explained"),r("OutboundLink")],1),e._v(" at a QCon talk. Fowler refers to this as the Richardson Maturity Model of RESTful design.")]),e._v(" "),r("p",[r("img",{attrs:{src:a(324),alt:""}})]),e._v(" "),r("p",[e._v("Martin Fowler, referencing "),r("a",{attrs:{href:"https://www.amazon.com/gp/product/0596805829?ie=UTF8&tag=martinfowlerc-20&linkCode=as2&camp=1789&creative=9325&creativeASIN=0596805829",target:"_blank",rel:"noopener noreferrer"}},[e._v("Rest in Practice"),r("OutboundLink")],1),e._v(",2 summarizes the genesis of RESTful design:")]),e._v(" "),r("blockquote",[r("p",[e._v("use Restful web services to handle many of the integration problems that enterprises face. At its heart . . . is the notion that the web is an existence proof of a massively scalable distributed system that works really well, and we can take ideas from that to build integrated systems more easily.")])]),e._v(" "),r("p",[e._v("A pragmatic approach to RESTful design uses the best parts of Fielding's conceptual framework to allow developers and integrators to understand what they can do with the API as rapidly as possible and without writing extraneous code.")]),e._v(" "),r("p",[e._v("At its most fundamental, a RESTful design is resource-centric and uses HTTP verbs. At its most advanced, a design that follows pure academic REST utilizes the HATEOAS principle by implementing Hypermedia Controls. We are advocating a Level 2 RESTful design for Mojaloop.")]),e._v(" "),r("h3",{attrs:{id:"why-not-hypermedia-controls"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#why-not-hypermedia-controls"}},[e._v("#")]),e._v(" Why not Hypermedia Controls?")]),e._v(" "),r("p",[e._v("Although HATEOAS is a fascinating principle-it advocates that a server should respond to each client action with a list of all possible actions that can lead the client to its next application state. And further, clients "),r("em",[e._v("must not")]),e._v(" rely on out of band information (like a written API spec) for what actions can be performed on which resources or on the format of URIs.")]),e._v(" "),r("p",[e._v("It is this final proscription that fails the test of Pragmatic REST: While HATEOAS is an interesting theoretical approach to limit coupling, it does not easily apply to Mojaloop (or any other contract API design). When we take into account our audience for the interconnect APIs, we find a group of commercial entities that will be operating under a set of highly specific scheme rules. Interactions between the participants, and between participant and central service hub, will be highly specified to assign acceptable commercial risk that can be priced at very low cost to end-users. This requires "),r("em",[e._v("ex-ante")]),e._v(" predictability of the API which is anathema to the HATEOAS principle defined by Fielding.")]),e._v(" "),r("h3",{attrs:{id:"pragmatic-restful-principles"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#pragmatic-restful-principles"}},[e._v("#")]),e._v(" Pragmatic RESTful Principles")]),e._v(" "),r("h4",{attrs:{id:"uris-define-resources"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#uris-define-resources"}},[e._v("#")]),e._v(" URIs Define Resources")]),e._v(" "),r("p",[e._v("A well-designed URI pattern makes an API easy to consume, discover, and extend, just as a carefully designed API does in a traditional programming language. Pure REST disdains this principle in favor of HATEOAS. But pragmatic REST follows a normal pattern for URI definitions to improve human understanding, even if HATEOAS principles are employed for discovery.")]),e._v(" "),r("p",[e._v("URI paths that refer to a collection of objects should consist of a plural noun, e.g. /customers, to refer to a set of customers. When a collection can have only one instance, the singular noun should be used to avoid confusion. E.g. GET /transfers/:id/fulfillment is correct, since there is only one fulfillment object per identified transfer.")]),e._v(" "),r("p",[e._v("URI paths that refer to a single object should consist of a plural noun (representing the collection), followed by a predefined unique identifier. E.g., /customers/123456 to refer to the specific customer with number 123456. The identifier must be unique within the containing collection and persist for the life of the object within that collection. IDs must not be ordinal values-ordinal retrieval of objects from a collection is possible using query parameters on the collection URI.")]),e._v(" "),r("p",[e._v("URI paths may have a prefix to identify the environment, version, or other context of the resource. Nothing should follow the identifying path but collections and object references.")]),e._v(" "),r("p",[e._v("URI path and query segment identifiers should be chosen from the Roman character set, [0-9A-Za-z]. Use "),r("em",[e._v("camelCase")]),e._v(" to define the elements of the URI path. Do not use snake_case.")]),e._v(" "),r("p",[e._v('For the avoidance of doubt, "_" (underscore) and "-" (hyphen) should not be used in URI path or query segment identifiers.')]),e._v(" "),r("p",[e._v("This probably seems a bit parochial. The purpose is to find a well-defined URI format that is consistent with wide-spread practice, easy to define, predictable, and that maps to native environments and conventions. It isn't going to satisfy everyone. Here is reasoning behind this constraint:")]),e._v(" "),r("p",[e._v("CapitalCase and camelCase are the defacto standard for NodeJS and JavaScript and are a common constraint in URI definition: URI path segments are often mapped to JS internal resources and so conforming to JS naming conventions makes sense.")]),e._v(" "),r("p",[e._v("Field names in JSON and SQL should also follow this convention since they are often automatically mapped into variable name space and can be referenced in URIs as path or query segment identifiers.")]),e._v(" "),r("p",[e._v('We should also avoid the use of "$" unless it is required by a library (e.g. JQuery). IBM JCL has passed away; let it rest in peace. There are better scope control tools to separate name spaces than introducing non-roman symbols.')]),e._v(" "),r("p",[e._v('We should avoid "-" (hyphen) in path segment and query parameter names as it does not map into variable names, SQL, or JSON field name identifiers.')]),e._v(" "),r("p",[e._v('Underscore characters must be escaped in markdown source by prefixing each with a "" character.')]),e._v(" "),r("p",[e._v("Snake_case has been reported to be slightly easier to read than camelCase in variable names, but it actually does not improve readability of URIs, as it visually interferes with path and query segment delimiters making it difficult to visually parse them. And when URIs are underlined in presentation, the underscores become illegible.")]),e._v(" "),r("h4",{attrs:{id:"uri-parameters"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#uri-parameters"}},[e._v("#")]),e._v(" URI Parameters")]),e._v(" "),r("p",[e._v("Use a standard and predictable set of optional parameters in a consistent way.")]),e._v(" "),r("p",[e._v('A set of standard query parameters should be used for collections to enable caller control over how much of the collection they see. E.g. "count" to determine how many objects to return, "start" to determine where to start counting in the result set, and "q" as a generic free-form search query. We will define the standard set of parameters as we go and will apply them consistently.')]),e._v(" "),r("h4",{attrs:{id:"verbs"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#verbs"}},[e._v("#")]),e._v(" Verbs")]),e._v(" "),r("p",[e._v("Singular objects should support GET for read, PUT for complete replacement (or creation when the primary key is specified by the client and is persistent, e.g. a payment card PAN), and DELETE for delete.")]),e._v(" "),r("p",[e._v("Collections should support GET to read back the whole or part of a collection, and POST to add a new object to the collection.")]),e._v(" "),r("p",[e._v("Singular objects may support POST as a way to change their state in specified ways. Posting a JSON document to a singular object URI may allow selected field values to be updated or trigger a state change or action without replacing the whole object.")]),e._v(" "),r("p",[e._v("GET must be implemented in a "),r("em",[e._v("nullipotent")]),e._v(" manner-that is, GET never causes side effects and never modifies client-visible system state (other than logging events or updating instrumentation, e.g.).")]),e._v(" "),r("p",[e._v("PUT and DELETE must be implemented in an "),r("em",[e._v("idempotent")]),e._v(" manner-that is, changes are applied consistently to the system data in a way that is dependent only on the state of the resource and inputs but on nothing else. The action has no additional effect if it is executed more than once with the same input parameters and does not depend on the order of other operations on a containing collection or other resources held in the collection. For example, removing a resource from a collection can be considered an idempotent operation on the collection. Using PUT to fully replace (or create) a uniquely identified resource when the URI is fully known to the client is also idempotent. This implies that the system may reorder operations to improve efficiency, and the client does not need to know whether a resource exists before attempting to replace it.")]),e._v(" "),r("p",[e._v("POST and PATCH3 are not idempotent operations. POST is used to create new resources where the resource identifier is assigned by the server or where a single identified internal resource is implied by the target URI (e.g. POST /transfers, but PUT /transfers/:id/fulfillment).")]),e._v(" "),r("h4",{attrs:{id:"data-format"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#data-format"}},[e._v("#")]),e._v(" Data Format")]),e._v(" "),r("p",[e._v("We favor "),r("a",{attrs:{href:"http://json.org/",target:"_blank",rel:"noopener noreferrer"}},[e._v("JSON"),r("OutboundLink")],1),e._v("4 related data formats over XML. In some cases, data formats will be binary or XML, as defined by pre-existing standards, and these will be precisely specified. Binary formats should have a formal syntax to avoid ambiguous representational translations (e.g. character set translations, big- or little-endian representations of numeric values, etc).")]),e._v(" "),r("p",[e._v("Date and time values used in APIs should comply to the ISO 8601 standard, and further profiled by the w3c Note on Date and Time Formats.5 This w3c note should lead to the reduction in complexity and error scope of communicating components that must exchange tangible dates and times. There will be cases where we use non-ISO format date or time as required by an external standard, e.g. ISO 7813 expiry dates.")]),e._v(" "),r("p",[e._v("Existing standard XML formats should have an XSD schema for the acceptable subset profile used within the project. For particularly complex data formats, we may use a common format profile translator to map between our project subset of the standard format and the wire format used by a standardized protocol (e.g.). This will limit coupling to complex formats in a more maintainable way.")]),e._v(" "),r("p",[e._v("When specifying the PATCH action for a resource, we will use a consistent patch document format (e.g. "),r("a",{attrs:{href:"http://jsonpatch.com/",target:"_blank",rel:"noopener noreferrer"}},[e._v("JSON Patch"),r("OutboundLink")],1),e._v("6).")]),e._v(" "),r("h4",{attrs:{id:"return-codes"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#return-codes"}},[e._v("#")]),e._v(" Return Codes")]),e._v(" "),r("p",[e._v("Use HTTP return codes in a consistent way and according to their standard definitions. The standard codes are defined in RFC 2616.7")]),e._v(" "),r("h4",{attrs:{id:"machine-readable-error-format"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#machine-readable-error-format"}},[e._v("#")]),e._v(" Machine Readable Error Format")]),e._v(" "),r("p",[e._v("The API should provide a machine readable error result in a well-defined JSON format. {TBD whether to use a response envelope and how to format errors, faults, and success envelopes. RESTful design relies on headers to carry protocol-defined errors, debug info can also be carried in headers. We should be clear on why we are using an envelope and how this supports normal production communication between client and server.")]),e._v(" "),r("h4",{attrs:{id:"versioning"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#versioning"}},[e._v("#")]),e._v(" Versioning")]),e._v(" "),r("p",[e._v("API URIs should include a version identifier in the format v_M_ as a leading path element (where "),r("em",[e._v('"M"')]),e._v(" is the Major component of the multi-part version number). The API and its version identifier element must conform to the "),r("a",{attrs:{href:"http://semver.org/",target:"_blank",rel:"noopener noreferrer"}},[e._v("semantic versioning"),r("OutboundLink")],1),e._v("8 2.0 specification for API versioning.")]),e._v(" "),r("p",[e._v("A client must specify the Major version number in each request. It is not possible for a client to express a requirement for a specific minor version.")]),e._v(" "),r("p",[e._v("The full API version number is specified in the response header (TBD) for all successful and error responses.")]),e._v(" "),r("p",[e._v("While an API version contract will be influenced by Major, minor, "),r("em",[e._v("and")]),e._v(" patch levels, only the Major version number is a production API binding element-that is, a production client cannot request a particular minor version or patch level and a production server will not accept a URI request that specifies these extra elements.")]),e._v(" "),r("p",[e._v("However, in pre-production environments, it is anticipated that some combination of minor, patch, pre-release, and metadata suffixes would be supported in client requests (as defined in "),r("em",[e._v("semver")]),e._v(" [3]) and "),r("em",[e._v("may")]),e._v(" be expressed in "),r("em",[e._v("pre-production")]),e._v(" URIs to assist with development and integration scenarios.")]),e._v(" "),r("h3",{attrs:{id:"we-may-need-to-give-rest-a-rest"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#we-may-need-to-give-rest-a-rest"}},[e._v("#")]),e._v(" We May Need to Give REST a Rest")]),e._v(" "),r("p",[e._v("As we design the interconnection APIs between components and between participating systems, we may find API requirements that don't precisely match the Pragmatic REST pattern defined here. We will evaluate these case-by-case and make the best choice to support the project goals.")]),e._v(" "),r("h3",{attrs:{id:"non-functional-requirements"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#non-functional-requirements"}},[e._v("#")]),e._v(" Non-Functional Requirements")]),e._v(" "),r("p",[e._v("As we develop the APIs, we will make consistent choices about non-functional requirements to reinforce the project goals.")]),e._v(" "),r("p",[e._v("1: "),r("a",{attrs:{href:"Richardson%20Maturity%20Model"}},[e._v("http://martinfowler.com/articles/richardsonMaturityModel.html")]),e._v(", retrieved August 18, 2016.")]),e._v(" "),r("p",[e._v("2: "),r("a",{attrs:{href:"https://www.amazon.com/gp/product/0596805829?ie=UTF8&tag=martinfowlerc-20&linkCode=as2&camp=1789&creative=9325&creativeASIN=0596805829",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://www.amazon.com/gp/product/0596805829"),r("OutboundLink")],1),e._v(", retrieved August 18, 2016.")]),e._v(" "),r("p",[e._v("3: RFC 5789, "),r("em",[e._v("PATCH Method for HTTP")]),e._v(", "),r("a",{attrs:{href:"https://tools.ietf.org/html/rfc5789",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://tools.ietf.org/html/rfc5789"),r("OutboundLink")],1),e._v(", retrieved August 18, 2016.")]),e._v(" "),r("p",[e._v("4: "),r("em",[e._v("Introducing JSON")]),e._v(", "),r("a",{attrs:{href:"http://json.org/",target:"_blank",rel:"noopener noreferrer"}},[e._v("http://json.org/"),r("OutboundLink")],1),e._v(", retrieved August 18, 2016.")]),e._v(" "),r("p",[e._v("5: "),r("a",{attrs:{href:"http://www.w3.org/TR/1998/NOTE-datetime-19980827",target:"_blank",rel:"noopener noreferrer"}},[e._v("http://www.w3.org/TR/1998/NOTE-datetime-19980827"),r("OutboundLink")],1),e._v(", retrieved August 22, 2016.")]),e._v(" "),r("p",[e._v("6: "),r("em",[e._v("JSON Patch")]),e._v(", "),r("a",{attrs:{href:"http://jsonpatch.com/",target:"_blank",rel:"noopener noreferrer"}},[e._v("http://jsonpatch.com/"),r("OutboundLink")],1),e._v(", retrieved August 18, 2016.")]),e._v(" "),r("p",[e._v("7: "),r("a",{attrs:{href:"https://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html"),r("OutboundLink")],1)]),e._v(" "),r("p",[e._v("8: "),r("em",[e._v("Semantic Versioning 2.0.0")]),e._v(", "),r("a",{attrs:{href:"http://semver.org/",target:"_blank",rel:"noopener noreferrer"}},[e._v("http://semver.org/"),r("OutboundLink")],1),e._v(", retrieved August 18, 2016.")])])}),[],!1,null,null,null);t.default=n.exports}}]);